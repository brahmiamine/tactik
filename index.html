<!doctype html>
<html lang="fr" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grille d‚Äôanalyse tactique ‚Äì Formulaire</title>
  <!-- Tailwind via CDN (pour prototypage). Pour prod : compile Tailwind. -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Optionnel : config Tailwind (sans couleurs custom)
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
</head>

<body class="min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100">
  <header
    class="sticky top-0 z-10 border-b border-slate-200/70 bg-white/80 backdrop-blur dark:border-slate-800/70 dark:bg-slate-950/70">
    <div class="mx-auto flex max-w-5xl items-center justify-between gap-3 px-4 py-3 sm:px-6">
      <div class="flex items-center gap-3">
        <div
          class="flex h-10 w-10 items-center justify-center rounded-2xl border border-slate-200 dark:border-slate-800">
          <span class="text-lg">‚öΩÔ∏è</span>
        </div>
        <div>
          <h1 class="text-base font-semibold leading-tight sm:text-lg">Grille d‚Äôanalyse tactique</h1>
          <p class="text-xs text-slate-600 dark:text-slate-400">Formulaire rapide (mobile + web) ‚Ä¢ Dark mode</p>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <button id="themeToggle" type="button"
          class="inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900">
          <span id="themeIcon" aria-hidden="true">üåô</span>
          <span class="hidden sm:inline">Mode</span>
        </button>
        <button id="clearBtn" type="button"
          class="inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900">
          <span aria-hidden="true">üßπ</span>
          <span class="hidden sm:inline">Vider</span>
        </button>
        <button id="printBtn" type="button"
          class="inline-flex items-center gap-2 rounded-xl bg-slate-900 px-3 py-2 text-sm font-medium text-white hover:opacity-90 dark:bg-slate-100 dark:text-slate-950">
          <span aria-hidden="true">üñ®Ô∏è</span>
          <span class="hidden sm:inline">Imprimer</span>
        </button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-5xl px-4 py-6 sm:px-6 sm:py-10">
    <!-- Barre actions mobile -->
    <div
      class="mb-6 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700 dark:border-slate-800 dark:bg-slate-900/40 dark:text-slate-200">
      <p class="font-medium">Conseil d‚Äôutilisation</p>
      <p class="mt-1 text-slate-600 dark:text-slate-400">Note des mots-cl√©s, pas des paragraphes. Remplis √† 15‚Äô,
        mi-temps, 70‚Äô. Une seule correction prioritaire.</p>
    </div>

    <form id="tacticalForm" class="space-y-6">
      <!-- ACTIONS -->
      <div class="flex flex-col gap-2 sm:flex-row sm:justify-end">
        <button type="button" id="exportJsonBtn"
          class="inline-flex items-center justify-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900">
          <span aria-hidden="true">üì§</span> Export JSON
        </button>
        <button type="button" id="saveBtn"
          class="inline-flex items-center justify-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900">
          <span aria-hidden="true">üíæ</span> Sauvegarder
        </button>
        <button type="button" id="loadBtn"
          class="inline-flex items-center justify-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900">
          <span aria-hidden="true">üì•</span> Charger
        </button>
      </div>
      <!-- INFORMATIONS GENERALES -->
      <section
        class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/30 sm:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">Informations g√©n√©rales</h2>
            <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Contexte du match et syst√®me.</p>
          </div>
          <span
            class="rounded-xl border border-slate-200 px-3 py-1 text-xs text-slate-600 dark:border-slate-800 dark:text-slate-300">üìã</span>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <div>
            <label class="text-sm font-medium" for="match">Match</label>
            <input id="match" name="match" type="text" placeholder="Ex: U15 ‚Äì J5"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>
          <div>
            <label class="text-sm font-medium" for="minute">Minute d‚Äôobservation</label>
            <select id="minute" name="minute"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700">
              <option value="15">15‚Äô</option>
              <option value="MT">Mi-temps</option>
              <option value="70">70‚Äô</option>
              <option value="autre">Autre</option>
            </select>
          </div>
          <div>
            <label class="text-sm font-medium" for="team">√âquipe observ√©e</label>
            <input id="team" name="team" type="text" placeholder="Ton √©quipe"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>
          <div>
            <label class="text-sm font-medium" for="opponent">Adversaire</label>
            <input id="opponent" name="opponent" type="text" placeholder="Adversaire"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>
          <div>
            <label class="text-sm font-medium" for="systemAnnounced">Syst√®me annonc√©</label>
            <input id="systemAnnounced" name="systemAnnounced" type="text" placeholder="Ex: 4-3-3"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>
          <div>
            <label class="text-sm font-medium" for="systemNoBall">Syst√®me r√©el sans ballon</label>
            <input id="systemNoBall" name="systemNoBall" type="text" placeholder="Ex: 4-4-2"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>
        </div>
      </section>

      <!-- 1) PLACEMENT SANS BALLON -->
      <section
        class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/30 sm:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">1) Placement sans ballon <span class="ml-2 cursor-help text-slate-400"
                title="D√©finition : organisation de l‚Äô√©quipe quand elle n‚Äôa pas le ballon. Astuce terrain : regarde la position de la ligne d√©fensive, la forme du milieu et les distances entre lignes quand l‚Äôadversaire fait circuler le ballon.">‚ìò</span>
            </h2>
            <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Bloc, forme, compacit√©.</p>
          </div>
          <span
            class="rounded-xl border border-slate-200 px-3 py-1 text-xs text-slate-600 dark:border-slate-800 dark:text-slate-300">üõ°Ô∏è</span>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Bloc
                d√©fensif</span> <button type="button" class="openModal text-slate-400" data-title="Bloc d√©fensif"
                data-content="D√©finition et astuce terrain pour Bloc d√©fensif.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="block" value="haut"
                  class="h-4 w-4" /> Haut</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="block" value="median"
                  class="h-4 w-4" /> M√©dian</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="block" value="bas"
                  class="h-4 w-4" /> Bas</label>
            </div>
          </fieldset>

          <div>
            <label class="text-sm font-medium" for="shapeNoBall">Forme sans ballon</label>
            <input id="shapeNoBall" name="shapeNoBall" type="text" placeholder="Ex: 4-4-2, 5-4-1‚Ä¶"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Distance d√©fense
                ‚Üî milieu</span> <button type="button" class="openModal text-slate-400"
                data-title="Distance d√©fense ‚Üî milieu" data-content="D√©finition et astuce terrain pour Distance d√©fense ‚Üî milieu.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distDM" value="courte"
                  class="h-4 w-4" /> Courte</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distDM" value="moyenne"
                  class="h-4 w-4" /> Moyenne</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distDM" value="longue"
                  class="h-4 w-4" /> Longue</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Distance milieu
                ‚Üî attaque</span> <button type="button" class="openModal text-slate-400"
                data-title="Distance milieu ‚Üî attaque" data-content="D√©finition et astuce terrain pour Distance milieu ‚Üî attaque.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distMA" value="courte"
                  class="h-4 w-4" /> Courte</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distMA" value="moyenne"
                  class="h-4 w-4" /> Moyenne</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="distMA" value="longue"
                  class="h-4 w-4" /> Longue</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Compacit√©
                horizontale</span> <button type="button" class="openModal text-slate-400"
                data-title="Compacit√© horizontale" data-content="D√©finition et astuce terrain pour Compacit√© horizontale.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="compactH" value="bonne"
                  class="h-4 w-4" /> Bonne</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="compactH" value="moyenne"
                  class="h-4 w-4" /> Moyenne</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="compactH" value="mauvaise"
                  class="h-4 w-4" /> Mauvaise</label>
            </div>
          </fieldset>


        </div>
      </section>

      <!-- 2) PRESSING -->
      <section
        class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/30 sm:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">2) Pressing <span class="ml-2 cursor-help text-slate-400"
                title="D√©finition : mani√®re dont l‚Äô√©quipe cherche √† r√©cup√©rer le ballon. Astuce terrain : observe qui sort en premier sur le porteur et si les autres suivent imm√©diatement.">‚ìò</span>
            </h2>
            <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">D√©clenchement, coordination, ligne qui suit.</p>
          </div>
          <span
            class="rounded-xl border border-slate-200 px-3 py-1 text-xs text-slate-600 dark:border-slate-800 dark:text-slate-300">üî•</span>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Zone de
                d√©clenchement</span> <button type="button" class="openModal text-slate-400"
                data-title="Zone de d√©clenchement" data-content="D√©finition et astuce terrain pour Zone de d√©clenchement.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="pressZone" value="haut"
                  class="h-4 w-4" /> Haut</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="pressZone"
                  value="ligne-mediane" class="h-4 w-4" /> Ligne m√©diane</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="pressZone" value="bas"
                  class="h-4 w-4" /> Bas</label>
            </div>
          </fieldset>

          <div>
            <label class="text-sm font-medium" for="pressTrigger">Joueur qui d√©clenche</label>
            <input id="pressTrigger" name="pressTrigger" type="text" placeholder="Ex: #9, ailier gauche, #10‚Ä¶"
              class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950/40 dark:focus:ring-slate-700" />
          </div>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Pressing
                coordonn√©</span> <button type="button" class="openModal text-slate-400" data-title="Pressing coordonn√©"
                data-content="D√©finition et astuce terrain pour Pressing coordonn√©.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex gap-4">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="pressCoord" value="oui"
                  class="h-4 w-4" /> Oui</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="pressCoord" value="non"
                  class="h-4 w-4" /> Non</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">La ligne
                d√©fensive suit</span> <button type="button" class="openModal text-slate-400"
                data-title="La ligne d√©fensive suit" data-content="D√©finition et astuce terrain pour La ligne d√©fensive suit.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex gap-4">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="backLineFollows"
                  value="oui" class="h-4 w-4" /> Oui</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="backLineFollows"
                  value="non" class="h-4 w-4" /> Non</label>
            </div>
          </fieldset>


        </div>
      </section>

      <!-- 3) TRANSITION OFFENSIVE -->
      <section
        class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/30 sm:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">3) Transition offensive (apr√®s r√©cup√©ration) <span
                class="ml-2 cursor-help text-slate-400"
                title="D√©finition : comportement de l‚Äô√©quipe juste apr√®s avoir r√©cup√©r√© le ballon. Astuce terrain : concentre-toi sur les 3 premi√®res secondes et regarde si le porteur a des solutions proches.">‚ìò</span>
            </h2>
            <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Premier choix, soutien, appels.</p>
          </div>
          <span
            class="rounded-xl border border-slate-200 px-3 py-1 text-xs text-slate-600 dark:border-slate-800 dark:text-slate-300">‚ö°</span>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Premier
                choix</span> <button type="button" class="openModal text-slate-400" data-title="Premier choix"
                data-content="D√©finition et astuce terrain pour Premier choix.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="firstChoice"
                  value="passe-securisee" class="h-4 w-4" /> Passe s√©curis√©e</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="firstChoice"
                  value="projection" class="h-4 w-4" /> Projection rapide</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="firstChoice"
                  value="degagement" class="h-4 w-4" /> D√©gagement</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Soutien autour
                du porteur</span> <button type="button" class="openModal text-slate-400"
                data-title="Soutien autour du porteur" data-content="D√©finition et astuce terrain pour Soutien autour du porteur.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex gap-4">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="supportCarrier"
                  value="oui" class="h-4 w-4" /> Oui</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="supportCarrier"
                  value="non" class="h-4 w-4" /> Non</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Appels
                offensifs</span> <button type="button" class="openModal text-slate-400" data-title="Appels offensifs"
                data-content="D√©finition et astuce terrain pour Appels offensifs.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="runs" value="axial"
                  class="h-4 w-4" /> Axial</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="runs" value="couloirs"
                  class="h-4 w-4" /> Couloirs</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="runs" value="aucun"
                  class="h-4 w-4" /> Aucun</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Intention
                claire</span> <button type="button" class="openModal text-slate-400" data-title="Intention claire"
                data-content="D√©finition et astuce terrain pour Intention claire.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex gap-4">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="clearIntent" value="oui"
                  class="h-4 w-4" /> Oui</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="clearIntent" value="non"
                  class="h-4 w-4" /> Non</label>
            </div>
          </fieldset>


        </div>
      </section>

      <!-- 4) ORGANISATION OFFENSIVE -->
      <section
        class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/30 sm:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">4) Organisation offensive <span class="ml-2 cursor-help text-slate-400"
                title="D√©finition : fa√ßon dont l‚Äô√©quipe attaque quand elle est install√©e. Astuce terrain : rep√®re les zones attaqu√©es le plus souvent et les sch√©mas qui se r√©p√®tent.">‚ìò</span>
            </h2>
            <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Zone dominante, type d‚Äôactions, pr√©sence surface.
            </p>
          </div>
          <span
            class="rounded-xl border border-slate-200 px-3 py-1 text-xs text-slate-600 dark:border-slate-800 dark:text-slate-300">üéØ</span>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Zone d‚Äôattaque
                dominante</span> <button type="button" class="openModal text-slate-400"
                data-title="Zone d‚Äôattaque dominante" data-content="D√©finition et astuce terrain pour Zone d‚Äôattaque dominante.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="attackZone" value="gauche"
                  class="h-4 w-4" /> Gauche</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="attackZone" value="droite"
                  class="h-4 w-4" /> Droite</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="attackZone" value="axe"
                  class="h-4 w-4" /> Axe</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Type
                d‚Äôactions</span> <button type="button" class="openModal text-slate-400" data-title="Type d‚Äôactions"
                data-content="D√©finition et astuce terrain pour Type d‚Äôactions.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="actionsType"
                  value="centres" class="h-4 w-4" /> Centres</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="actionsType"
                  value="combine" class="h-4 w-4" /> Jeu combin√©</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="actionsType"
                  value="long-ballon" class="h-4 w-4" /> Long ballon</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">R√©p√©tition des
                sch√©mas</span> <button type="button" class="openModal text-slate-400"
                data-title="R√©p√©tition des sch√©mas" data-content="D√©finition et astuce terrain pour R√©p√©tition des sch√©mas.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex gap-4">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="repeatPatterns"
                  value="oui" class="h-4 w-4" /> Oui</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="repeatPatterns"
                  value="non" class="h-4 w-4" /> Non</label>
            </div>
          </fieldset>

          <fieldset class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800">
            <legend class="px-2 text-sm font-medium flex items-center gap-2"><span class="legend-title">Pr√©sence dans la
                surface</span> <button type="button" class="openModal text-slate-400"
                data-title="Pr√©sence dans la surface" data-content="D√©finition et astuce terrain pour Pr√©sence dans la surface.

D√©finition : indicateur tactique observ√© sans ballon ou avec ballon selon la phase.
Astuce match : observe les comportements r√©p√©t√©s sur au moins 3 s√©quences, pas une action isol√©e.">‚ìò</button></legend>
            <div class="mt-2 flex flex-wrap gap-3">
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="boxPresence" value="bonne"
                  class="h-4 w-4" /> Bonne</label>
              <label class="inline-flex items-center gap-2 text-sm"><input type="radio" name="boxPresence"
                  value="faible" class="h-4 w-4" /> Faible</label>
            </div>
          </fieldset>


        </div>
      </section>


    </form>

    <!-- MODAL PEDAGOGIQUE -->
    <div id="infoModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50">
      <div class="w-full max-w-md rounded-2xl bg-white p-5 shadow-xl dark:bg-slate-900">
        <h3 id="modalTitle" class="text-lg font-semibold"></h3>
        <p id="modalContent" class="mt-3 whitespace-pre-line text-sm text-slate-700 dark:text-slate-300"></p>
        <div class="mt-4 text-right">
          <button id="closeModal"
            class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white dark:bg-slate-100 dark:text-slate-900">Fermer</button>
        </div>
      </div>
    </div>

    <footer class="mt-10 text-center text-xs text-slate-500 dark:text-slate-500">
      <p>¬© Grille d‚Äôanalyse tactique ‚Ä¢ Prototype Tailwind CDN ‚Ä¢ Donn√©es stock√©es localement (si tu utilises
        Sauvegarder).</p>
    </footer>
  </main>

  <script>
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const clearBtn = document.getElementById('clearBtn');
    const printBtn = document.getElementById('printBtn');
    const exportJsonBtn = document.getElementById('exportJsonBtn');
    const saveBtn = document.getElementById('saveBtn');
    const loadBtn = document.getElementById('loadBtn');
    const form = document.getElementById('tacticalForm');
    const status = document.getElementById('status');

    const STORAGE_KEY = 'tactical_grid_v1';
    const THEME_KEY = 'tactical_theme';

    function setStatus(message) {
      status.textContent = message;
      status.classList.remove('hidden');
      window.setTimeout(() => status.classList.add('hidden'), 2500);
    }

    function getFormData() {
      const fd = new FormData(form);
      // FormData ne capture pas les radios non s√©lectionn√©s : ok.
      return Object.fromEntries(fd.entries());
    }

    function setFormData(data) {
      // inputs/textarea/select
      for (const [k, v] of Object.entries(data || {})) {
        const el = form.elements.namedItem(k);
        if (!el) continue;

        // Radio group
        if (el instanceof RadioNodeList) {
          const nodes = Array.from(el);
          nodes.forEach((n) => {
            if (n && n.type === 'radio') n.checked = (n.value === v);
          });
          continue;
        }

        // Single element
        if (el.type === 'radio') {
          el.checked = el.value === v;
        } else {
          el.value = v;
        }
      }
    }

    function clearForm() {
      form.reset();
      setStatus('Formulaire vid√©.');
    }

    function applyTheme(theme) {
      const isDark = theme === 'dark';
      root.classList.toggle('dark', isDark);
      themeIcon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
      localStorage.setItem(THEME_KEY, theme);
    }

    function initTheme() {
      const saved = localStorage.getItem(THEME_KEY);
      if (saved) return applyTheme(saved);
      // d√©faut : dark (car html a la class dark)
      applyTheme(root.classList.contains('dark') ? 'dark' : 'light');
    }

    themeToggle.addEventListener('click', () => {
      const next = root.classList.contains('dark') ? 'light' : 'dark';
      applyTheme(next);
    });

    clearBtn.addEventListener('click', clearForm);
    printBtn.addEventListener('click', () => window.print());

    exportJsonBtn.addEventListener('click', () => {
      const data = getFormData();
      const json = JSON.stringify(data, null, 2);
      navigator.clipboard.writeText(json).then(() => {
        alert('JSON copi√© dans le presse-papiers. Colle-le dans la conversation pour analyse.');
      });
    });

    saveBtn.addEventListener('click', () => {
      const data = getFormData();
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      setStatus('Sauvegard√© (localStorage).');
    });

    loadBtn.addEventListener('click', () => {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return setStatus('Aucune sauvegarde trouv√©e.');
      try {
        const data = JSON.parse(raw);
        setFormData(data);
        setStatus('Charg√©.');
      } catch {
        setStatus('Sauvegarde invalide.');
      }
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      // Ici tu peux brancher un envoi API si tu veux.
      setStatus('Valid√© ‚úÖ (aucun envoi, juste confirmation).');
    });

    initTheme();

    // FIX LEGEND TITLES ($1 ISSUE)
    // FIX LEGEND TITLES (Fallback)
    document.querySelectorAll('legend').forEach(legend => {
      const btn = legend.querySelector('.openModal');
      if (!btn) return;
      const title = btn.dataset.title;
      const span = legend.querySelector('.legend-title');
      if (span && !span.textContent.trim() && title) {
        span.textContent = title;
      }
    });

    // MODAL LOGIC
    const modal = document.getElementById('infoModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const closeModal = document.getElementById('closeModal');

    // CONTENU PEDAGOGIQUE PAR CHAMP
    const FIELD_HELP = {
      "Bloc d√©fensif": `D√âFINITION
Position globale de l‚Äô√©quipe par rapport √† son but quand elle n‚Äôa pas le ballon.

COMMENT D√âTECTER
Observe la ligne d√©fensive quand l‚Äôadversaire construit.

ASTUCE MATCH
Regarde o√π se situe la d√©fense par rapport √† la ligne m√©diane.

EXEMPLE
D√©fense proche de la ligne m√©diane = bloc haut. D√©fense dans les 30m = bloc bas.` ,

      "Forme sans ballon": `D√âFINITION
Organisation r√©elle de l‚Äô√©quipe sans le ballon.

COMMENT D√âTECTER
Compte les lignes horizontales (d√©fense, milieu, attaque).

ASTUCE MATCH
Ignore la compo annonc√©e, regarde le placement r√©el.

EXEMPLE
4 joueurs au milieu et 2 devant = 4-4-2 sans ballon.` ,

      "Distance d√©fense ‚Üî milieu": `D√âFINITION
Espace vertical entre la ligne d√©fensive et le milieu.

COMMENT D√âTECTER
Observe si un milieu doit sprinter pour d√©fendre.

ASTUCE MATCH
Plus de 2 passes possibles dans l‚Äôintervalle = distance longue.

EXEMPLE
Un 10 adverse re√ßoit librement entre les lignes = distance trop longue.` ,

      "Distance milieu ‚Üî attaque": `D√âFINITION
Espace entre milieux et attaquants.

COMMENT D√âTECTER
Regarde si l‚Äôattaquant est isol√©.

ASTUCE MATCH
Un 9 seul = distance longue.

EXEMPLE
Le 9 re√ßoit dos au but sans soutien = probl√®me de distance.` ,

      "Compacit√© horizontale": `D√âFINITION
Largeur occup√©e par l‚Äô√©quipe sans ballon.

COMMENT D√âTECTER
Observe si l‚Äôadversaire change de c√¥t√© facilement.

ASTUCE MATCH
Si les couloirs sont ouverts = compacit√© mauvaise.

EXEMPLE
Renversement gauche-droite sans opposition = √©quipe trop √©tir√©e.` ,

      "Zone de d√©clenchement": `D√âFINITION
Zone du terrain o√π l‚Äô√©quipe commence √† presser.

COMMENT D√âTECTER
Observe √† quel moment les joueurs sortent sur le porteur.

ASTUCE MATCH
Si le pressing d√©marre d√®s la relance = haut.

EXEMPLE
Les attaquants pressent le gardien = pressing haut.` ,

      "Pressing coordonn√©": `D√âFINITION
Pressing collectif avec d√©placements synchronis√©s.

COMMENT D√âTECTER
Un joueur presse, les autres suivent imm√©diatement.

ASTUCE MATCH
Un pressing seul = pressing inefficace.

EXEMPLE
Le 9 presse mais les ailiers restent passifs = non coordonn√©.` ,

      "La ligne d√©fensive suit": `D√âFINITION
Capacit√© de la d√©fense √† monter avec le pressing.

COMMENT D√âTECTER
Observe si les d√©fenseurs avancent quand on presse.

ASTUCE MATCH
Pressing sans ligne haute = danger.

EXEMPLE
Pressing des attaquants, d√©fense basse = √©quipe coup√©e.` ,

      "Premier choix": `D√âFINITION
Premi√®re d√©cision apr√®s r√©cup√©ration du ballon.

COMMENT D√âTECTER
Observe le premier geste du r√©cup√©rateur.

ASTUCE MATCH
Le premier choix r√©v√®le l‚Äôintention de jeu.

EXEMPLE
Passe arri√®re imm√©diate = s√©curisation.` ,

      "Soutien autour du porteur": `D√âFINITION
Pr√©sence de solutions proches apr√®s r√©cup√©ration.

COMMENT D√âTECTER
Compte les options √† 5‚Äì10 m√®tres.

ASTUCE MATCH
Un porteur seul = probl√®me tactique.

EXEMPLE
Le r√©cup√©rateur est encercl√© sans soutien = perte rapide.` ,

      "Appels offensifs": `D√âFINITION
D√©placements des joueurs apr√®s r√©cup√©ration.

COMMENT D√âTECTER
Regarde la direction des courses.

ASTUCE MATCH
Appels r√©p√©t√©s = intention claire.

EXEMPLE
Courses syst√©matiques sur les c√¥t√©s = jeu de largeur.` ,

      "Intention claire": `D√âFINITION
Lisibilit√© du plan offensif apr√®s r√©cup√©ration.

COMMENT D√âTECTER
Pose-toi la question : sais-tu ce qu‚Äôils veulent faire ?

ASTUCE MATCH
Si tu h√©sites, l‚Äô√©quipe h√©site aussi.

EXEMPLE
Une fois long, une fois court = pas d‚Äôintention.` ,

      "Zone d‚Äôattaque dominante": `D√âFINITION
Zone du terrain la plus utilis√©e pour attaquer.

COMMENT D√âTECTER
Observe d‚Äôo√π viennent la majorit√© des attaques.

ASTUCE MATCH
70 % d‚Äôun c√¥t√© = zone dominante.

EXEMPLE
Toutes les attaques passent √† droite = c√¥t√© droit dominant.` ,

      "Type d‚Äôactions": `D√âFINITION
Mani√®re de cr√©er des occasions.

COMMENT D√âTECTER
Observe la r√©p√©tition des actions.

ASTUCE MATCH
La r√©p√©tition d√©finit le style.

EXEMPLE
Centres r√©p√©t√©s = jeu direct.` ,

      "R√©p√©tition des sch√©mas": `D√âFINITION
Pr√©sence de circuits offensifs travaill√©s.

COMMENT D√âTECTER
Regarde si la m√™me action revient.

ASTUCE MATCH
R√©p√©tition = travail tactique.

EXEMPLE
M√™me combinaison c√¥t√© droit = sch√©ma r√©p√©t√©.` ,

      "Pr√©sence dans la surface": `D√âFINITION
Nombre de joueurs attaquant la zone de finition.

COMMENT D√âTECTER
Compte les joueurs dans la surface au centre.

ASTUCE MATCH
Moins de 2 joueurs = pr√©sence faible.

EXEMPLE
Un seul attaquant dans la surface = danger limit√©.`
    };

    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.openModal');
      if (!btn) return;
      const title = btn.dataset.title;
      modalTitle.textContent = title;
      modalContent.textContent = FIELD_HELP[title] || btn.dataset.content;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });

    closeModal.addEventListener('click', () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    });
  </script>

  <style>
    /* Impression : garde un rendu propre */
    /* Impression : garde un rendu propre */
    @media print {

      header,
      #saveBtn,
      #loadBtn,
      #clearBtn,
      #printBtn,
      #themeToggle,
      footer {
        display: none !important;
      }

      body {
        background: white !important;
        color: black !important;
      }

      section {
        break-inside: avoid;
      }
    }

    /* Force le mode sombre natif (scrollbars, form controls) */
    html.dark {
      color-scheme: dark;
    }

    html:not(.dark) {
      color-scheme: light;
    }

    /* Radios/checkbox : un peu plus lisibles sans d√©pendre de plugins */
    input[type="radio"] {
      /* Utilise une couleur d'accentuation fixe et visible dans les deux modes (bleu indigo par ex) */
      accent-color: #4f46e5;
      width: 1.1em;
      height: 1.1em;
      vertical-align: middle;
    }
  </style>
</body>

</html>